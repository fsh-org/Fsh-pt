<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Account - Fsh PT</title>
    <meta property="og:title" content="Activity - Fsh PT">
    <meta name="twitter:title" content="Activity - Fsh PT">
    <meta name="description" content="Fsh PT, an alternative user and application api ui.">
    <meta property="og:description" content="Fsh PT, an alternative user and application api ui.">
    <meta name="twitter:description" content="Fsh PT, an alternative user and application api ui.">
    <!-- ------- -->
    <meta charset="UTF-8">
    <meta name="robots" content="index, follow">
    <meta property="og:locale" content="en">
    <meta property="og:type" content="website">
    <meta name="twitter:card" content="summary">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="https://fsh.plus/favicon.ico" type="image/vnd.microsoft.icon">
    <meta property="og:image" content="https://fsh.plus/favicon.ico">
    <meta property="og:image:alt" content="Fsh logo">
    <meta name="twitter:image" content="https://fsh.plus/favicon.ico">
    <meta name="theme-color" content="#a89c9b">
    <!-- ------- -->
    <link rel="stylesheet" href="https://fsh.plus/media/style.css">
    <script src="https://account.fsh.plus/script.js"></script>
    <!-- ------- -->
    <link rel="stylesheet" href="/media/user.css">
    <script src="/media/script.js"></script>
    <script src="/media/user.js"></script>
  </head>
  <body>
    <nav></nav>
    <main>
      <div class="card">
        <span id="name"></span>
        <span id="small" class="subtext"></span>
      </div>
      <div style="margin:10px">
        <a id="BApi"><button>API</button></a>
        <a id="BSsh"><button>SSH</button></a>
        <a id="BActivity"><button>Activity</button></a>
      </div>
      <div style="display:flex">
        <form class="card" onsubmit="event.preventDefault();uemail()">
          <b>Update Email</b>
          <label>Email <input id="ue-email" type="email" autocomplete="email" required></label>
          <label>Password <input id="ue-pass" type="password" autocomplete="current-password" required></label>
          <button>Update</button>
        </form>
        <form class="card" onsubmit="event.preventDefault();upass()">
          <b>Update Password</b>
          <label>Current <input id="up-oldpass" type="password" autocomplete="current-password" required></label>
          <label>New <input id="up-newpass" type="password" autocomplete="new-password" minlength="8" required></label>
          <span class="subtext">8 characters minimum and make it unique.</span>
          <label>Repeat <input id="up-newrepp" type="password" autocomplete="new-password" minlength="8" required></label>
          <button>Update</button>
        </form>
      </div>
      <script>
        softLink(document.getElementById('BApi'), './api', 'account/api', {});
        softLink(document.getElementById('BSsh'), './ssh', 'account/ssh', {});
        softLink(document.getElementById('BActivity'), './activity', 'account/activity', {});
        PT('account', (a)=>{
          a = a.attributes;
          document.getElementById('name').innerText = `${a.first_name} ${a.last_name} (${a.username})`;
          document.getElementById('small').innerText = `${a.admin?'Admin ':''}ID: ${a.id} ${a.email}`;
        });
        window.uemail = ()=>{
          PT('account/email', ()=>{}, 'PUT', JSON.stringify({
            email: document.getElementById('ue-email').value,
            password: document.getElementById('ue-pass').value
          }));
        };
        window.upass = ()=>{
          PT('account/password', ()=>{}, 'PUT', JSON.stringify({
            current_password: document.getElementById('up-oldpass').value,
            password: document.getElementById('up-newpass').value,
            password_confirmation: document.getElementById('up-newrepp').value
          }));
        };
      </script>
    </main>
  </body>
</html>